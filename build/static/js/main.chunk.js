(this["webpackJsonpjira-chrome-extension"]=this["webpackJsonpjira-chrome-extension"]||[]).push([[0],{16:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(7),s=n(1),a=(n(9),n(6)),u=n.n(a),c=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,i,s,a,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,o=void 0===n?"POST":n,i=t.requestPath,s=void 0===i?"":i,a=t.body,"/rest/api/2",e.next=4,fetch("".concat("/rest/api/2","/").concat(s),{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return u=e.sent,e.next=7,null===u||void 0===u?void 0:u.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,i,s,a,l,d,f,p,v,m,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.jql,o=t.fields,i=void 0===o?[]:o,s=t.resultPropertyPath,a=void 0===s?"issues":s,l=t.maxResults,d=void 0===l?50:l,f=0,p=[],v=0;case 4:return e.next=6,c({requestPath:"search",body:{jql:n,fields:i,startAt:f,maxResults:d}});case 6:g=e.sent,v=null===g||void 0===g?void 0:g.total,p=p.concat(u.a.get(g,a,[])),console.log("Got ".concat(p.length," of ").concat(v," results for jql ").concat(n)),f=null===(m=p)||void 0===m?void 0:m.length;case 11:if(v>p.length){e.next=4;break}case 12:return e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,i,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:[],t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return o="key in (".concat(t.join(),")"),console.log("je: getIssuesForKeys: number of keys: ".concat(null===t||void 0===t?void 0:t.length,"}")),console.log("je: getIssuesForKeys: jql: ".concat(o,"}")),e.next=8,l({jql:o,fields:n,maxResults:5e3});case 8:return i=e.sent,console.log("je: getIssuesForKeys: issueData.length: ".concat(i.length)),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,i,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:[],t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return o="'Epic Link' in (".concat(t.join(),")"),console.log("je: getIssuesLinkedToEpics: jql: ".concat(o,"}")),e.next=7,l({jql:o,fields:n,maxResults:5e3});case 7:return i=e.sent,console.log("je: getIssuesLinkedToEpics: issueData.length: ".concat(i.length)),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={EPIC:"Epic",STORY:"Story",SPIKE:"Spike",BUG:"Bug"};Object.freeze(p);var v="issuetype",m="status",g="customfield_11901",h="customfield_14102",y="customfield_10008",b=function(e){return e.querySelectorAll("div[class*='js-detailview']")},S=function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.issuetype)||void 0===n?void 0:n.name},O=function(e){return null===e||void 0===e?void 0:e.key},k=function(e,t){return e.filter((function(e){return t===S(e)}))},j=function(e){var t=new Map;return e.map((function(e){var n=function(e){var t;return null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.customfield_10008}(e);if(n){var o,r=null!==(o=t.get(n))&&void 0!==o?o:[];t.set(n,r.concat(e))}})),t},x=function(e){return e.map((function(e){return O(e)}))},C=function(e,t,n){var o=new Map;return t.map((function(t){var r=O(t);o.set(r,{issueType:S(t),issue:t,issueCard:e.get(r),linkedIssues:n.get(r)})})),o},P=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,s,a,u,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=b(t))||void 0===n?void 0:n.length){e.next=3;break}return e.abrupt("return");case 3:return console.log("je: handleMutation: found ".concat(n.length," descendant cards")),o=W(n),console.log("je: handleMutation: found ".concat(o.size," cards the need modification")),e.next=8,d(Object(i.a)(o.keys()),["key",v,m,g,h,y]);case 8:return s=e.sent,e.next=11,f(x(k(s,p.EPIC)),["key",v,m,g,h,y]);case 11:a=e.sent,console.log("je: handleMutation: found ".concat(a.length," issues linked to epics")),console.log("je: handleMutation: issueData.length: ".concat(null===s||void 0===s?void 0:s.length)),u=j(s),console.log("je: handleMutation: found ".concat(u.size," epics linked to issues ")),c=C(o,s,u),console.log("je: handleMutation: issueDataMap size ".concat(c.size)),c.forEach((function(e,t){var n=e.issueType;A(e),p.EPIC===n?M(e):[p.STORY,p.SPIKE].includes(n)?(console.log("je: handleMutation: is story or spike"),F(e)):p.BUG===n&&K(e)})),console.log("je: handleMutation: issueData.length: ".concat(null===s||void 0===s?void 0:s.length));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t=e.issueCard,n=e.linkedIssues,o=B(n);q(t,o),I(t,o),E(t,o),w(t,o),0===o.totalNumberOfStoriesOrSpikes||o.numberOfStoriesOrSpikesWithEstimates!=o.totalNumberOfStoriesOrSpikes?R(t,"BurlyWood"):R(t,"MediumTurquoise")},w=function(e,t){var n=t.numberOfBugsClosed,o=t.totalNumberOfBugs,r="".concat(n," of ").concat(o," bugs closed");L(e,"epicBugsSummary",r,r)},q=function(e,t){var n=t.numberOfStoriesOrSpikesWithEstimates,o=t.totalNumberOfStoriesOrSpikes,r="".concat(n," of ").concat(o," stories estimated");L(e,"epicEstimatesSummary",r,r)},E=function(e,t){var n=t.storyPointsCompleted,o=t.totalStoryPoints,r="".concat(n," of ").concat(o," points completed");L(e,"epicStoryPointsSummary",r,r)},I=function(e,t){var n=t.numberOfStoriesOrSpikesCompleted,o=t.totalNumberOfStoriesOrSpikes,r="".concat(n," of ").concat(o," stories  completed");L(e,"epicStoriesCompletedSummary",r,r)},T=function(e){return"Closed"===function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.name}(e)},B=function(e){var t,n={totalNumberOfStoriesOrSpikes:0,numberOfStoriesOrSpikesWithEstimates:0,numberOfStoriesOrSpikesCompleted:0,totalStoryPoints:0,storyPointsCompleted:0,totalNumberOfBugs:0,numberOfBugsClosed:0};return null!==(t=null===e||void 0===e?void 0:e.reduce((function(e,t){var n=N(t);return!function(e){return[p.STORY,p.SPIKE].includes(S(e))}(t)?function(e){return"Bug"===S(e)}(t)&&(e.totalNumberOfBugs++,T(t)&&e.numberOfBugsClosed++):(e.totalNumberOfStoriesOrSpikes++,n&&(e.totalStoryPoints+=n,e.numberOfStoriesOrSpikesWithEstimates++,T(t)&&(e.numberOfStoriesOrSpikesCompleted++,e.storyPointsCompleted+=n))),e}),n))&&void 0!==t?t:n},N=function(e){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.fields)||void 0===n?void 0:n.customfield_11901)&&void 0!==t?t:0},A=function(e){var t=e.issueCard;D(G(t),t)},F=function(e){var t=e.issueCard,n=e.issue,o=N(n);z(o,t),R(t,o?"PaleTurquoise":"Khaki")},K=function(e){var t=e.issueCard;R(t,"LightPink")},R=function(e,t){e.setAttribute("style","background-color:".concat(t,";"))},L=function(e,t,n,o){if(!e.querySelector("span[id='".concat(t,"']"))){var r=e.querySelector("div[class='ghx-extra-fields']");r&&r.insertAdjacentHTML("beforeend",'<div class="ghx-extra-field-row">\n          <span class="ghx-extra-field" id="'.concat(t,'" data-tooltip="').concat(o,'">\n            <span class="ghx-extra-field-content">').concat(n,"</span>\n          </span>\n        </div>"))}},z=function(e,t){if(console.log("je: addOrModifyStoryPointsField"),!t.querySelector("span[id='labeledStoryPointsField']")){var n=t.querySelector("span[data-tooltip*='Story Points:']");n&&(n.textContent="".concat(e," story points"),n.setAttribute("id","labeledStoryPointsField"),n.setAttribute("data-tooltip","".concat(e," story points")))}},D=function(e,t){L(t,"daysInColumnField","".concat(e," days in column"),"".concat(e," days in column"))},W=function(e){var t=new Map;return console.log("je: getMapOfIssueCardsThatNeedModification: found ".concat(e.length," descendant cards. type: ").concat(typeof e)),null===e||void 0===e||e.forEach((function(e){(function(e){return null===e||void 0===e?void 0:e.getAttribute("modified-by-extension")})(e)||t.set(_(e),e)})),console.log("je: getMapOfIssueCardsThatNeedModification: end"),t},_=function(e){return null===e||void 0===e?void 0:e.getAttribute("data-issue-key")},G=function(e){var t,n,o=null===(t=e.querySelector("div[class='ghx-days']"))||void 0===t||null===(n=t.getAttribute("title"))||void 0===n?void 0:n.replace(" days in this column","");return null!==o&&void 0!==o?o:"Unknown"},J=new MutationObserver((function(e){e.map((function(e){var t=e.target.getAttribute("id"),n=e.target.getAttribute("class");("ghx-pool"===t||(null===n||void 0===n?void 0:n.includes("ghx-column")))&&P(e.target)}))})),U=document.querySelector("html");J.observe(U,{childList:!0,subtree:!0})}},[[16,1,2]]]);
//# sourceMappingURL=main.chunk.js.map