(this["webpackJsonpjira-chrome-extension"]=this["webpackJsonpjira-chrome-extension"]||[]).push([[0],{7:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r=n(3),a=n(1),s=n(2),u=n.n(s),c=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,o,r,a,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,o=void 0===n?"POST":n,r=t.requestPath,a=void 0===r?"":r,s=t.body,"/rest/api/2",e.next=4,fetch("".concat("/rest/api/2","/").concat(a),{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 4:return u=e.sent,e.next=7,null===u||void 0===u?void 0:u.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,o,r,a,s,l,d,f,v,p,g,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.jql,o=t.fields,r=void 0===o?[]:o,a=t.resultPropertyPath,s=void 0===a?"issues":a,l=t.maxResults,d=void 0===l?50:l,f=0,v=[],p=0;case 4:return e.next=6,c({requestPath:"search",body:{jql:n,fields:r,startAt:f,maxResults:d}});case 6:h=e.sent,p=null===h||void 0===h?void 0:h.total,v=v.concat(u.a.get(h,s,[])),console.log("je: Got ".concat(v.length," of ").concat(p," results for jql ").concat(n)),f=null===(g=v)||void 0===g?void 0:g.length;case 11:if(p>v.length){e.next=4;break}case 12:return e.abrupt("return",v);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,o,r,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:[],t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return o="key in (".concat(t.join(),")"),console.log("je: getIssuesForKeys: number of keys: ".concat(null===t||void 0===t?void 0:t.length,"}")),console.log("je: getIssuesForKeys: jql: ".concat(o,"}")),e.next=8,l({jql:o,fields:n,maxResults:5e3});case 8:return r=e.sent,console.log("je: getIssuesForKeys: issueData.length: ".concat(r.length)),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,o,r,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:[],t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return o="'Epic Link' in (".concat(t.join(),")"),console.log("je: getIssuesLinkedToEpics: jql: ".concat(o,"}")),e.next=7,l({jql:o,fields:n,maxResults:5e3});case 7:return r=e.sent,console.log("je: getIssuesLinkedToEpics: issueData.length: ".concat(r.length)),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={EPIC:"Epic",STORY:"Story",SPIKE:"Spike",BUG:"Bug"};Object.freeze(v);var p="issuetype",g="status",h="customfield_11901",m="customfield_14102",b="customfield_10008",y=function(e){return e.querySelectorAll("div[class*='js-detailview']")},x=function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.issuetype)||void 0===n?void 0:n.name},S=function(e){return null===e||void 0===e?void 0:e.key},O=function(e,t){var n,o=e.querySelector("span[data-tooltip*='".concat(t,":']")),i=null===o||void 0===o?void 0:o.parentNode;null===i||void 0===i||null===(n=i.parentNode)||void 0===n||n.removeChild(i)},k=function(e,t){return e.filter((function(e){return t===x(e)}))},j=function(e){var t=new Map;return e.map((function(e){var n=function(e){var t;return null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.customfield_10008}(e);if(n){var o,i=null!==(o=t.get(n))&&void 0!==o?o:[];t.set(n,i.concat(e))}})),t},C=function(e){return e.map((function(e){return S(e)}))},P=function(e,t,n){var o=new Map;return t.map((function(t){var i=S(t);o.set(i,{issueType:x(t),issue:t,issueCard:e.get(i),linkedIssues:n.get(i)})})),o},M=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,o,a,s,u,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=y(t))||void 0===n?void 0:n.length){e.next=3;break}return e.abrupt("return");case 3:return console.log("je: handleMutation: found ".concat(n.length," descendant cards")),o=F(n),console.log("je: handleMutation: found ".concat(o.size," cards the need modification")),e.next=8,d(Object(r.a)(o.keys()),["key",p,g,h,m,b]);case 8:return a=e.sent,e.next=11,f(C(k(a,v.EPIC)),["key",p,g,h,m,b]);case 11:s=e.sent,console.log("je: handleMutation: found ".concat(s.length," issues linked to epics")),console.log("je: handleMutation: issueData.length: ".concat(null===a||void 0===a?void 0:a.length)),u=j(a),console.log("je: handleMutation: found ".concat(u.size," epics linked to issues ")),c=P(o,a,u),console.log("je: handleMutation: issueDataMap size ".concat(c.size)),c.forEach((function(e,t){var n=e.issueType;L(e),v.EPIC===n?w(e):[v.STORY,v.SPIKE].includes(n)?(console.log("je: handleMutation: is story or spike"),K(e)):v.BUG===n&&R(e)})),console.log("je: handleMutation: issueData.length: ".concat(null===a||void 0===a?void 0:a.length));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=e.issueCard,n=e.linkedIssues,o=A(n);E(t,o),I(t,o),N(t,o),q(t,o),0===o.totalNumberOfStoriesOrSpikes||o.numberOfStoriesOrSpikesWithEstimates!=o.totalNumberOfStoriesOrSpikes?U(t,"BurlyWood"):U(t,"MediumTurquoise")},q=function(e,t){var n=t.numberOfBugsClosed,o=t.totalNumberOfBugs,i="".concat(n," of ").concat(o," bugs closed");_(e,"epicBugsSummary",i,i)},E=function(e,t){var n=t.numberOfStoriesOrSpikesWithEstimates,o=t.totalNumberOfStoriesOrSpikes,i="".concat(n," of ").concat(o," stories estimated");_(e,"epicEstimatesSummary",i,i)},N=function(e,t){var n=t.storyPointsCompleted,o=t.totalStoryPoints,i="".concat(n," of ").concat(o," points completed");_(e,"epicStoryPointsSummary",i,i)},I=function(e,t){var n=t.numberOfStoriesOrSpikesCompleted,o=t.totalNumberOfStoriesOrSpikes,i="".concat(n," of ").concat(o," stories  completed");_(e,"epicStoriesCompletedSummary",i,i)},T=function(e){return"Closed"===function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.name}(e)},A=function(e){var t,n={totalNumberOfStoriesOrSpikes:0,numberOfStoriesOrSpikesWithEstimates:0,numberOfStoriesOrSpikesCompleted:0,totalStoryPoints:0,storyPointsCompleted:0,totalNumberOfBugs:0,numberOfBugsClosed:0};return null!==(t=null===e||void 0===e?void 0:e.reduce((function(e,t){var n=B(t);return!function(e){return[v.STORY,v.SPIKE].includes(x(e))}(t)?function(e){return"Bug"===x(e)}(t)&&(e.totalNumberOfBugs++,T(t)&&e.numberOfBugsClosed++):(e.totalNumberOfStoriesOrSpikes++,n&&(e.totalStoryPoints+=n,e.numberOfStoriesOrSpikesWithEstimates++,T(t)&&(e.numberOfStoriesOrSpikesCompleted++,e.storyPointsCompleted+=n))),e}),n))&&void 0!==t?t:n},B=function(e){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.fields)||void 0===n?void 0:n.customfield_11901)&&void 0!==t?t:0},L=function(e){var t=e.issueCard;!function(e,t){var n;if(t){var o=t.displayName,i=t.avatarUrl,r=e.querySelector("div[class='ghx-avatar']"),a="Pair Assignee: ".concat(o);null===r||void 0===r||null===(n=r.parentNode)||void 0===n||n.insertAdjacentHTML("beforeend",'<div class="pair-assignee-avatar">\n      <img src='.concat(i,'\n      class="ghx-avatar-img" alt="').concat(a,'" data-tooltip="').concat(a,'" original-title="">\n    </div>'))}}(t,function(e){var t,n=null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.customfield_14102;return n?{avatarUrl:null===n||void 0===n?void 0:n.avatarUrls["48x48"],displayName:null===n||void 0===n?void 0:n.displayName}:null}(e.issue)),O(t,"Story Points"),O(t,"Pair Assignee"),D(G(t),t)},K=function(e){var t=e.issueCard,n=e.issue,o=B(n);z(t,o),U(t,o?"PaleTurquoise":"Khaki")},R=function(e){var t=e.issueCard;U(t,"LightPink")},U=function(e,t){e.setAttribute("style","background-color:".concat(t,";"))},_=function(e,t,n,o){if(!e.querySelector("span[id='".concat(t,"']"))){var i=e.querySelector("div[class='ghx-extra-fields']");i&&i.insertAdjacentHTML("beforeend",'<div class="ghx-extra-field-row">\n          <span class="ghx-extra-field" id="'.concat(t,'" data-tooltip="').concat(o,'">\n            <span class="ghx-extra-field-content">').concat(n,"</span>\n          </span>\n        </div>"))}},z=function(e,t){var n="Story Points: ".concat(t);_(e,"labeledStoryPointsField",n,n)},D=function(e,t){_(t,"daysInColumnField","".concat(e," days in column"),"".concat(e," days in column"))},F=function(e){var t=new Map;return console.log("je: getMapOfIssueCardsThatNeedModification: found ".concat(e.length," descendant cards. type: ").concat(typeof e)),null===e||void 0===e||e.forEach((function(e){(function(e){return null===e||void 0===e?void 0:e.getAttribute("modified-by-extension")})(e)||(!function(e){e.setAttribute("modified-by-extension","true")}(e),t.set(W(e),e))})),console.log("je: getMapOfIssueCardsThatNeedModification: end"),t},W=function(e){return null===e||void 0===e?void 0:e.getAttribute("data-issue-key")},G=function(e){var t,n,o=null===(t=e.querySelector("div[class='ghx-days']"))||void 0===t||null===(n=t.getAttribute("title"))||void 0===n?void 0:n.replace(" days in this column","");return null!==o&&void 0!==o?o:"Unknown"},H=!1,J=new MutationObserver((function(e){e.map((function(e){var t=e.target.getAttribute("id"),n=e.target.getAttribute("class");("ghx-pool"===t||(null===n||void 0===n?void 0:n.includes("ghx-column")))&&(H||(Q(),H=!0),M(e.target))}))})),Y=document.querySelector("html");J.observe(Y,{childList:!0,subtree:!0});var Q=function(){var e=document.createElement("style");e.innerHTML=V,document.body.appendChild(e)},V="\n.ghx-band-1 .ghx-issue .pair-assignee-avatar {\n  right: auto;\n  top: 65px;\n}\n\n.ghx-band-1 .ghx-issue .ghx-type, .ghx-band-1 .ghx-issue .ghx-flags, .ghx-band-1 .ghx-issue .pair-assignee-avatar {\n  left: 8px;\n}\n.ghx-issue.ghx-has-avatar .pair-assignee-avatar {\n  display: block;\n}\n.ghx-issue .pair-assignee-avatar{\n  display: none;\n  position: absolute;\n  right: 10px;\n  top: 50px;\n}\n.ghx-band-2 .ghx-issue .pair-assignee-avatar {\n  right: 5px;\n  top: 30px;\n}\n"}},[[7,1,2]]]);
//# sourceMappingURL=main.chunk.js.map