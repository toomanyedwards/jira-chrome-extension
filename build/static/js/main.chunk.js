(this["webpackJsonpjira-chrome-extension"]=this["webpackJsonpjira-chrome-extension"]||[]).push([[0],{7:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(3),a=n(1),s=n(2),u=n.n(s),l=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,o,i,a,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,o=void 0===n?"POST":n,i=t.requestPath,a=void 0===i?"":i,s=t.body,"/rest/api/2",e.next=4,fetch("".concat("/rest/api/2","/").concat(a),{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 4:return u=e.sent,e.next=7,null===u||void 0===u?void 0:u.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,o,i,a,s,c,d,v,f,p,g,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.jql,o=t.fields,i=void 0===o?[]:o,a=t.resultPropertyPath,s=void 0===a?"issues":a,c=t.maxResults,d=void 0===c?50:c,v=0,f=[],p=0;case 4:return e.next=6,l({requestPath:"search",body:{jql:n,fields:i,startAt:v,maxResults:d}});case 6:h=e.sent,p=null===h||void 0===h?void 0:h.total,f=f.concat(u.a.get(h,s,[])),console.log("je: Got ".concat(f.length," of ").concat(p," results for jql ").concat(n)),v=null===(g=f)||void 0===g?void 0:g.length;case 11:if(p>f.length){e.next=4;break}case 12:return e.abrupt("return",f);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,o,i,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:[],t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return o="key in (".concat(t.join(),")"),console.log("je: getIssuesForKeys: number of keys: ".concat(null===t||void 0===t?void 0:t.length,"}")),console.log("je: getIssuesForKeys: jql: ".concat(o,"}")),e.next=8,c({jql:o,fields:n,maxResults:5e3});case 8:return i=e.sent,console.log("je: getIssuesForKeys: issueData.length: ".concat(i.length)),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,o,i,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:[],t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return o="'Epic Link' in (".concat(t.join(),")"),console.log("je: getIssuesLinkedToEpics: jql: ".concat(o,"}")),e.next=7,c({jql:o,fields:n,maxResults:5e3});case 7:return i=e.sent,console.log("je: getIssuesLinkedToEpics: issueData.length: ".concat(i.length)),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f={EPIC:"Epic",STORY:"Story",SPIKE:"Spike",BUG:"Bug"};Object.freeze(f);var p="issuetype",g="status",h="customfield_11901",m="customfield_14102",b="customfield_10008",y=function(e){return e.querySelectorAll("div[class*='js-detailview']")},x=function(e){return null===e||void 0===e?void 0:e.getAttribute("modified-by-extension")},S=function(e){e.setAttribute("modified-by-extension","true")},k=function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.issuetype)||void 0===n?void 0:n.name},j=function(e){return null===e||void 0===e?void 0:e.key},O=function(e,t){var n,o=e.querySelector("span[data-tooltip*='".concat(t,":']")),r=null===o||void 0===o?void 0:o.parentNode;null===r||void 0===r||null===(n=r.parentNode)||void 0===n||n.removeChild(r)},w=function(e,t){return e.filter((function(e){return t===k(e)}))},C=function(e){var t=new Map;return e.map((function(e){var n=function(e){var t;return null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.customfield_10008}(e);if(n){var o,r=null!==(o=t.get(n))&&void 0!==o?o:[];t.set(n,r.concat(e))}})),t},q=function(e){return e.map((function(e){return j(e)}))},P=function(e,t,n){var o=new Map;return t.map((function(t){var r=j(t);o.set(r,{issueType:k(t),issue:t,issueCard:e.get(r),linkedIssues:n.get(r)})})),o},M=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,o,a,s,u,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=y(t))||void 0===n?void 0:n.length){e.next=3;break}return e.abrupt("return");case 3:return console.log("je: handleMutation: found ".concat(n.length," descendant cards")),o=H(n),console.log("je: handleMutation: found ".concat(o.size," cards the need modification")),e.next=8,d(Object(i.a)(o.keys()),["key",p,g,h,m,b]);case 8:return a=e.sent,e.next=11,v(q(w(a,f.EPIC)),["key",p,g,h,m,b]);case 11:s=e.sent,console.log("je: handleMutation: found ".concat(s.length," issues linked to epics")),console.log("je: handleMutation: issueData.length: ".concat(null===a||void 0===a?void 0:a.length)),u=C(s),console.log("je: handleMutation: found ".concat(u.size," epics linked to issues ")),l=P(o,a,u),console.log("je: handleMutation: issueDataMap size ".concat(l.size)),l.forEach((function(e,t){var n=e.issueType;K(e),f.EPIC===n?A(e):[f.STORY,f.SPIKE].includes(n)?(console.log("je: handleMutation: is story or spike"),U(e)):f.BUG===n&&_(e)})),console.log("je: handleMutation: issueData.length: ".concat(null===a||void 0===a?void 0:a.length));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t=e.issueCard,n=e.linkedIssues,o=L(n);N(t,o),T(t,o),I(t,o),E(t,o)},E=function(e,t){var n=t.numberOfBugsClosed,o=t.totalNumberOfBugs,r="".concat(n," of ").concat(o," bugs closed");J(e,"epicBugsSummary",r,r)},N=function(e,t){var n=t.numberOfStoriesOrSpikesWithEstimates,o=t.totalNumberOfStoriesOrSpikes,r="".concat(n," of ").concat(o," stories estimated");J(e,"epicEstimatesSummary",r,r,0===o||o!=n?"background-color:yellow":"")},I=function(e,t){var n=t.storyPointsCompleted,o=t.totalStoryPoints,r="".concat(n," of ").concat(o," points completed");J(e,"epicStoryPointsSummary",r,r)},T=function(e,t){var n=t.numberOfStoriesOrSpikesCompleted,o=t.totalNumberOfStoriesOrSpikes,r="".concat(n," of ").concat(o," stories completed");J(e,"epicStoriesCompletedSummary",r,r)},B=function(e){return"Closed"===function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.name}(e)},L=function(e){var t,n={totalNumberOfStoriesOrSpikes:0,numberOfStoriesOrSpikesWithEstimates:0,numberOfStoriesOrSpikesCompleted:0,totalStoryPoints:0,storyPointsCompleted:0,totalNumberOfBugs:0,numberOfBugsClosed:0};return null!==(t=null===e||void 0===e?void 0:e.reduce((function(e,t){var n=R(t);return!function(e){return[f.STORY,f.SPIKE].includes(k(e))}(t)?function(e){return"Bug"===k(e)}(t)&&(e.totalNumberOfBugs++,B(t)&&e.numberOfBugsClosed++):(e.totalNumberOfStoriesOrSpikes++,n&&(e.totalStoryPoints+=n,e.numberOfStoriesOrSpikesWithEstimates++),B(t)&&(e.numberOfStoriesOrSpikesCompleted++,e.storyPointsCompleted+=n)),e}),n))&&void 0!==t?t:n},R=function(e){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.fields)||void 0===n?void 0:n.customfield_11901)&&void 0!==t?t:0},K=function(e){var t=e.issueCard;!function(e,t){var n;if(t){var o=t.displayName,r=t.avatarUrl,i=e.querySelector("div[class='ghx-avatar']"),a="Pair Assignee: ".concat(o);null===i||void 0===i||null===(n=i.parentNode)||void 0===n||n.insertAdjacentHTML("beforeend",'<div class="pair-assignee-avatar">\n      <img src='.concat(r,'\n      class="ghx-avatar-img" alt="').concat(a,'" data-tooltip="').concat(a,'" original-title="">\n    </div>'))}}(t,function(e){var t,n=null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.customfield_14102;return n?{avatarUrl:null===n||void 0===n?void 0:n.avatarUrls["48x48"],displayName:null===n||void 0===n?void 0:n.displayName}:null}(e.issue)),z(t),O(t,"Story Points"),O(t,"Pair Assignee"),G(Q(t),t)},U=function(e){var t=e.issueCard,n=e.issue,o=R(n);Y(t,o)},_=function(e){e.issueCard},z=function(e){var t=D(e);t&&F(e,t)},D=function(e){var t,n,o=null===e||void 0===e||null===(t=e.querySelector("div[class='ghx-grabber']"))||void 0===t?void 0:t.getAttribute("style");return null!==(n=null===o||void 0===o?void 0:o.replace("background-color:",""))&&void 0!==n?n:null},F=function(e,t){e.setAttribute("style","background-color:".concat(t,";"))},J=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!e.querySelector("span[id='".concat(t,"']"))){var i=e.querySelector("div[class='ghx-extra-fields']");i&&i.insertAdjacentHTML("beforeend",'<div class="ghx-extra-field-row">\n          <span class="ghx-extra-field" id="'.concat(t,'" data-tooltip="').concat(o,'" style="').concat(r,'">\n            <span class="ghx-extra-field-content">').concat(n,"</span>\n          </span>\n        </div>"))}},Y=function(e,t){var n=t?"":"background-color:Yellow",o="Story Points: ".concat(t);J(e,"labeledStoryPointsField",o,o,n)},G=function(e,t){J(t,"daysInColumnField","".concat(e," days in column"),"".concat(e," days in column"))},H=function(e){var t=new Map;return console.log("je: getMapOfIssueCardsThatNeedModification: found ".concat(e.length," descendant cards. type: ").concat(typeof e)),null===e||void 0===e||e.forEach((function(e){x(e)||(S(e),t.set(W(e),e))})),console.log("je: getMapOfIssueCardsThatNeedModification: end"),t},W=function(e){return null===e||void 0===e?void 0:e.getAttribute("data-issue-key")},Q=function(e){var t,n,o=null===(t=e.querySelector("div[class='ghx-days']"))||void 0===t||null===(n=t.getAttribute("title"))||void 0===n?void 0:n.replace(" days in this column","");return null!==o&&void 0!==o?o:"Unknown"},V=!1,X=new MutationObserver((function(e){e.map((function(e){var t=e.target.getAttribute("id"),n=e.target.getAttribute("class");"ghx-pool"===t||(null===n||void 0===n?void 0:n.includes("ghx-column"))?M(e.target):"gh"===t&&(V||(V=!0,$(te),$(ee)),function(e){var t,n=null!==(t=e.querySelector("div[id*='js-work-quickfilters']"))&&void 0!==t?t:e.querySelector("div[id*='js-plan-quickfilters']");if(n&&!x(n)){S(n);var o=n.querySelectorAll("a[class*='js-quickfilter-button']");null===o||void 0===o||o.forEach((function(e){var t=e.getAttribute("title");if(t)try{var n,o=JSON.parse(t);o&&(e.setAttribute("style",o.style),e.setAttribute("title",null!==(n=o.tooltip)&&void 0!==n?n:""))}catch(r){}}))}}(e.target))}))})),Z=document.querySelector("html");X.observe(Z,{childList:!0,subtree:!0});var $=function(e){var t=document.createElement("style");t.innerHTML=e,document.body.appendChild(t)},ee="\n.ghx-controls-filters dd a.ghx-active {\n  border: 2px solid darkgray;\n  color: #3b73af;\n  filter: drop-shadow(2px 4px 6px blue);\n  background-color:white;\n}\n\n.ghx-controls-filters dd a.ghx-active:hover {\n  background: white;\n}\n",te="\n.ghx-band-1 .ghx-issue .pair-assignee-avatar {\n  right: auto;\n  top: 65px;\n}\n\n.ghx-band-1 .ghx-issue .ghx-type, .ghx-band-1 .ghx-issue .ghx-flags, .ghx-band-1 .ghx-issue .pair-assignee-avatar {\n  left: 8px;\n}\n.ghx-issue.ghx-has-avatar .pair-assignee-avatar {\n  display: block;\n}\n.ghx-issue .pair-assignee-avatar{\n  display: none;\n  position: absolute;\n  right: 10px;\n  top: 50px;\n}\n.ghx-band-2 .ghx-issue .pair-assignee-avatar {\n  right: 5px;\n  top: 30px;\n}\n"}},[[7,1,2]]]);
//# sourceMappingURL=main.chunk.js.map