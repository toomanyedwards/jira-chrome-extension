(this["webpackJsonpjira-chrome-extension"]=this["webpackJsonpjira-chrome-extension"]||[]).push([[0],{7:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(3),s=n(1),a=n(2),u=n.n(a),c=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,i,s,a,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,o=void 0===n?"POST":n,i=t.requestPath,s=void 0===i?"":i,a=t.body,"/rest/api/2",e.next=4,fetch("".concat("/rest/api/2","/").concat(s),{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return u=e.sent,e.next=7,null===u||void 0===u?void 0:u.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,i,s,a,l,d,f,v,p,g,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.jql,o=t.fields,i=void 0===o?[]:o,s=t.resultPropertyPath,a=void 0===s?"issues":s,l=t.maxResults,d=void 0===l?50:l,f=0,v=[],p=0;case 4:return e.next=6,c({requestPath:"search",body:{jql:n,fields:i,startAt:f,maxResults:d}});case 6:m=e.sent,p=null===m||void 0===m?void 0:m.total,v=v.concat(u.a.get(m,a,[])),console.log("Got ".concat(v.length," of ").concat(p," results for jql ").concat(n)),f=null===(g=v)||void 0===g?void 0:g.length;case 11:if(p>v.length){e.next=4;break}case 12:return e.abrupt("return",v);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,i,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:[],t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return o="key in (".concat(t.join(),")"),console.log("je: getIssuesForKeys: number of keys: ".concat(null===t||void 0===t?void 0:t.length,"}")),console.log("je: getIssuesForKeys: jql: ".concat(o,"}")),e.next=8,l({jql:o,fields:n,maxResults:5e3});case 8:return i=e.sent,console.log("je: getIssuesForKeys: ".concat(JSON.stringify(i,null,2))),console.log("je: getIssuesForKeys: issueData.length: ".concat(i.length)),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,i,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:[],t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return o="'Epic Link' in (".concat(t.join(),")"),console.log("je: getIssuesLinkedToEpics: jql: ".concat(o,"}")),e.next=7,l({jql:o,fields:n,maxResults:5e3});case 7:return i=e.sent,console.log("je: getIssuesLinkedToEpics: issueData.length: ".concat(i.length)),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={EPIC:"Epic",STORY:"Story",SPIKE:"Spike",BUG:"Bug"};Object.freeze(v);var p="issuetype",g="status",m="customfield_11901",h="customfield_14102",y="customfield_10008",b=function(e){return e.querySelectorAll("div[class*='js-detailview']")},S=function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.issuetype)||void 0===n?void 0:n.name},O=function(e){return null===e||void 0===e?void 0:e.key},k=function(e,t){var n,o=e.querySelector("span[data-tooltip*='".concat(t,":']")),r=null===o||void 0===o?void 0:o.parentNode;null===r||void 0===r||null===(n=r.parentNode)||void 0===n||n.removeChild(r)},j=function(e,t){return e.filter((function(e){return t===S(e)}))},x=function(e){var t=new Map;return e.map((function(e){var n=function(e){var t;return null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.customfield_10008}(e);if(n){var o,r=null!==(o=t.get(n))&&void 0!==o?o:[];t.set(n,r.concat(e))}})),t},C=function(e){return e.map((function(e){return O(e)}))},P=function(e,t,n){var o=new Map;return t.map((function(t){var r=O(t);o.set(r,{issueType:S(t),issue:t,issueCard:e.get(r),linkedIssues:n.get(r)})})),o},w=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,o,s,a,u,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=b(t))||void 0===n?void 0:n.length){e.next=3;break}return e.abrupt("return");case 3:return console.log("je: handleMutation: found ".concat(n.length," descendant cards")),o=_(n),console.log("je: handleMutation: found ".concat(o.size," cards the need modification")),e.next=8,d(Object(i.a)(o.keys()),["key",p,g,m,h,y]);case 8:return s=e.sent,e.next=11,f(C(j(s,v.EPIC)),["key",p,g,m,h,y]);case 11:a=e.sent,console.log("je: handleMutation: found ".concat(a.length," issues linked to epics")),console.log("je: handleMutation: issueData.length: ".concat(null===s||void 0===s?void 0:s.length)),u=x(s),console.log("je: handleMutation: found ".concat(u.size," epics linked to issues ")),c=P(o,s,u),console.log("je: handleMutation: issueDataMap size ".concat(c.size)),c.forEach((function(e,t){var n=e.issueType;K(e),v.EPIC===n?M(e):[v.STORY,v.SPIKE].includes(n)?(console.log("je: handleMutation: is story or spike"),R(e)):v.BUG===n&&F(e)})),console.log("je: handleMutation: issueData.length: ".concat(null===s||void 0===s?void 0:s.length));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t=e.issueCard,n=e.linkedIssues,o=B(n);E(t,o),N(t,o),I(t,o),q(t,o),0===o.totalNumberOfStoriesOrSpikes||o.numberOfStoriesOrSpikesWithEstimates!=o.totalNumberOfStoriesOrSpikes?L(t,"BurlyWood"):L(t,"MediumTurquoise")},q=function(e,t){var n=t.numberOfBugsClosed,o=t.totalNumberOfBugs,r="".concat(n," of ").concat(o," bugs closed");z(e,"epicBugsSummary",r,r)},E=function(e,t){var n=t.numberOfStoriesOrSpikesWithEstimates,o=t.totalNumberOfStoriesOrSpikes,r="".concat(n," of ").concat(o," stories estimated");z(e,"epicEstimatesSummary",r,r)},I=function(e,t){var n=t.storyPointsCompleted,o=t.totalStoryPoints,r="".concat(n," of ").concat(o," points completed");z(e,"epicStoryPointsSummary",r,r)},N=function(e,t){var n=t.numberOfStoriesOrSpikesCompleted,o=t.totalNumberOfStoriesOrSpikes,r="".concat(n," of ").concat(o," stories  completed");z(e,"epicStoriesCompletedSummary",r,r)},T=function(e){return"Closed"===function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.name}(e)},B=function(e){var t,n={totalNumberOfStoriesOrSpikes:0,numberOfStoriesOrSpikesWithEstimates:0,numberOfStoriesOrSpikesCompleted:0,totalStoryPoints:0,storyPointsCompleted:0,totalNumberOfBugs:0,numberOfBugsClosed:0};return null!==(t=null===e||void 0===e?void 0:e.reduce((function(e,t){var n=A(t);return!function(e){return[v.STORY,v.SPIKE].includes(S(e))}(t)?function(e){return"Bug"===S(e)}(t)&&(e.totalNumberOfBugs++,T(t)&&e.numberOfBugsClosed++):(e.totalNumberOfStoriesOrSpikes++,n&&(e.totalStoryPoints+=n,e.numberOfStoriesOrSpikesWithEstimates++,T(t)&&(e.numberOfStoriesOrSpikesCompleted++,e.storyPointsCompleted+=n))),e}),n))&&void 0!==t?t:n},A=function(e){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.fields)||void 0===n?void 0:n.customfield_11901)&&void 0!==t?t:0},K=function(e){var t=e.issueCard;k(t,"Story Points"),k(t,"Pair Assignee"),W(G(t),t)},R=function(e){var t=e.issueCard,n=e.issue,o=A(n);D(t,o),L(t,o?"PaleTurquoise":"Khaki")},F=function(e){var t=e.issueCard;L(t,"LightPink")},L=function(e,t){e.setAttribute("style","background-color:".concat(t,";"))},z=function(e,t,n,o){if(!e.querySelector("span[id='".concat(t,"']"))){var r=e.querySelector("div[class='ghx-extra-fields']");r&&r.insertAdjacentHTML("beforeend",'<div class="ghx-extra-field-row">\n          <span class="ghx-extra-field" id="'.concat(t,'" data-tooltip="').concat(o,'">\n            <span class="ghx-extra-field-content">').concat(n,"</span>\n          </span>\n        </div>"))}},D=function(e,t){var n="Story Points: ".concat(t);z(e,"labeledStoryPointsField",n,n)},W=function(e,t){z(t,"daysInColumnField","".concat(e," days in column"),"".concat(e," days in column"))},_=function(e){var t=new Map;return console.log("je: getMapOfIssueCardsThatNeedModification: found ".concat(e.length," descendant cards. type: ").concat(typeof e)),null===e||void 0===e||e.forEach((function(e){(function(e){return null===e||void 0===e?void 0:e.getAttribute("modified-by-extension")})(e)||(!function(e){e.setAttribute("modified-by-extension","true")}(e),t.set(J(e),e))})),console.log("je: getMapOfIssueCardsThatNeedModification: end"),t},J=function(e){return null===e||void 0===e?void 0:e.getAttribute("data-issue-key")},G=function(e){var t,n,o=null===(t=e.querySelector("div[class='ghx-days']"))||void 0===t||null===(n=t.getAttribute("title"))||void 0===n?void 0:n.replace(" days in this column","");return null!==o&&void 0!==o?o:"Unknown"},U=new MutationObserver((function(e){e.map((function(e){var t=e.target.getAttribute("id"),n=e.target.getAttribute("class");("ghx-pool"===t||(null===n||void 0===n?void 0:n.includes("ghx-column")))&&w(e.target)}))})),Y=document.querySelector("html");U.observe(Y,{childList:!0,subtree:!0})}},[[7,1,2]]]);
//# sourceMappingURL=main.chunk.js.map